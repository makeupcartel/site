define([
    "jquery",
    "owlCarousel",
    "aos"
], function ($, owlCarousel, AOS) {
    // $('.algolia-search-block .block-title').click(function() {
    //     if (!$(this).parent().hasClass('over')) {
    //         $(this).parent().addClass('over');
    //     }
    // })
    // $('.algolia-searchbox--close').click(function() {
    //     if ($(this).closest('.algolia-search-block').hasClass('over')) {
    //         $(this).closest('.algolia-search-block').removeClass('over');
    //     }
    // })<script>

    AOS.init({
        duration: 1200,
    });
    $(document).ready(function () {
        submitNewsletterContact();
      
        //checkout button edit shipping field
        $(document).on('click', '.edit-field-btn', function() {
            var id = $(this).data('id');
            if($('#'+id).hasClass('locked')){
                $('#'+id).removeClass('locked');
                $('label.locked[for="'+id+'"]').removeClass('locked');
                $('#'+id).focus();
            }else{
                $('#'+id).focus();
            }
        });


        function submitNewsletterContact(){
            let main_form = jQuery('#newsletter-validate-detail');
            if(main_form.length > 0){
                let str_error = '<div for="newsletter" generated="true" class="mage-error" id="newsletter-error" style="display: block;">This is a required field.</div>';
                let str_error2 = '<div for="newsletter" generated="true" class="mage-error" id="newsletter-error" style="display: block;">Please enter a valid email address (Ex: johndoe@domain.com).</div>';
                let form = jQuery('.block.newsletter #newsletter-contact-validate-detail');
                if(form.length > 0){
                    let input = form.find('input.newsletter_email');
                    form.on('click','.action.subscribe',function(){
                        let val = input.val().trim();
                        let error = form.find('.control #newsletter-error');
                        if(input == ''){
                            input.addClass('mage-error');
                            if(error.length > 0){
                                error.text('This is a required field.');
                            }else{
                                input.parent('.control').append(str_error);
                            }
                            return false;
                        }
                        else if(isEmail(val) == false){
                            input.addClass('mage-error');
                            if(error.length > 0){
                                error.text('Please enter a valid email address (Ex: johndoe@domain.com).');
                            }else{
                                input.parent('.control').append(str_error2);
                            }
                            return false;
                            
                        }else{
                            main_form.find('.control input').val(val);
                            main_form.find('.actions .action.primary').trigger("click");
                            return false;
                        }
                    })
                }
            }
        }

     function isEmail(email) {
        var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if(!regex.test(email)) {
          return false;
        }else{
          return true;
        }
    }

        //open and close input search produce

        $('.block.block-search .control span.close-search').click(function () {
            $('.block.block-search .block.block-content').css('display', 'none');
        });

        $("div#searchProduct").click(function (event) {
            $(".block.block-search .block.block-content").css("cssText", "display: block;");
            $('form#search_mini_form label.label').css('display', 'none');
            $('form#search_mini_form label.label').trigger('click');
            $(".block-search .label.active + .control input").css("cssText", "display: block;");
        });

        $(".amsearch-closes").click(function (event) {
            $(".block.block-search .block.block-content").css("cssText", "display: none;");
        });

        /*$(document).click(function (e) {
            var container = $("div#searchProduct strong");
            if (!container.is(e.target) && container.has(e.target).length === 0) {
                $(".block-search .label.active + .control input").css("cssText", "display: none;");
            }
        });*/


        jQuery('.decreaseQtybundle').click(function (event) {
            var qty = parseInt(jQuery(this).closest('.control').find(".qty").val()) - 1;
            if (qty <= 0) {

            } else jQuery(this).closest('.control').find('.qty').val(qty);

        });
        jQuery('.increaseQtybundle').click(function (event) {
            var qty = parseInt(jQuery(this).closest('.control').find(".qty").val()) + 1;
            jQuery(this).closest('.control').find('.qty').val(qty);
        });

        $('.lessmore-short-desc').click(function (e) {
            e.preventDefault();
            $('.sub-short-desc').show();
            $('.full-short-desc').hide();

        });

        var iOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false);
        $(document).on('click', '.button-back-top .bt', function () {
            setTimeout(function () {
                if (iOS) {
                    $('html, body', parent.document).animate({scrollTop: $("body").offset().top}, 1500, "easeOutQuart");
                } else {
                    $('html, body').animate({scrollTop: $("body").offset().top}, 1500, "easeOutQuart");
                }
            }, 400);
        });
        $("span.edit_month").click(function () {
            var valueOption = $(this).closest("tbody.cart.item").find('.additional-info-wrapper').length;
            if (valueOption != 0) {
                var widthScreen = $(window).width();
                if (widthScreen >= 768) {
                    $(this).closest("tbody.cart.item").find('.additional-info-wrapper').css("display", "table-row");
                } else {
                    $(this).closest("tbody.cart.item").find('.additional-info-wrapper').css("display", "inline-flex");
                }
            }
        });

        $(".update_product_cart").click(function () {
            $('.cart.main.actions .action.update').trigger('click');
        });

        /*$(".page-product-bundle.catalog-product-view #bundle-slide").trigger('click');*/


        //validate stress adress
        $('.street-adress').keyup(function () {
            var stressval = $.trim(this.value);
            if (stressval.length > 40) {
                $('.message-validate-stress-adress').html("Please enter less or equal than 40 characters");
                $('.message-validate-stress-adress').css({'display': 'block'});
                $("button.action.save.primary").attr("disabled", true);
                $('.street-adress').css({'border': 'solid 1px red'});
            } else {
                $('.message-validate-stress-adress').css({'display': 'none'});
                $("button.action.save.primary").attr("disabled", false);
                $('.street-adress').css({'border': 'solid 1px #e4e4e4'});
            }
        });

        $('.tel-account').keyup(function () {
            var x = $.trim(this.value);
            if (x.length < 7) {
                $('.message-validate-phone').html("Please enter more or equal than 7 characters");
                $('.message-validate-phone').css({'display': 'block'});
                $("button.action.save.primary").attr("disabled", true);
                $('.tel-account').css({'border-color': 'red'});
            }else 
            if (validateTelephoneAccount(x) === 0) {
                $('.message-validate-phone').html("Please enter a valid number in this field.");
                $('.message-validate-phone').css({'display': 'block'});
                $("button.action.save.primary").attr("disabled", true);
                $('.tel-account').css({'border-color': 'red'});
            }else {
                $('.message-validate-phone').css({'display': 'none'});
                $("button.action.save.primary").attr("disabled", false);
                $('.tel-account').css({'border-color': '#e4e4e4'});
            }
        });

        function validateTelephoneAccount(telephone) 
        {
            var filter = /^\+?[0-9]*$/g;
            if (filter.test(telephone)) 
            {
                return 1;
            } else {
                return 0;
            }
        }

        /* NEXT STEP SKIN QUIZ */


        function validateEmail(sEmail) {
            var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
            if (filter.test(sEmail)) {
                return true;
            } else {
                return false;
            }
        }


        $(".secondary-begin-quiz").click(function () {

            if ($("select.age-quiz option:checked").val() === '' || $("input#emailquiz").val() === '') {

                if ($("input#emailquiz").val() === '') {
                    $('.message-error-quiz-email').html('This is a required field.');
                    $('.message-error-quiz-email').css({'color': 'red', 'margin-top': '5px'});
                    $('input#emailquiz').css({'border': '1px solid red'});
                }
                if ($("select.age-quiz option:checked").val() === '') {
                    $('.message-error-quiz').html('*This is a required field.');
                    $('.message-error-quiz').css({'color': 'red', 'margin-top': '5px'});
                    $('.age-quiz').css({'border': '1px solid red'});
                }
            } else {
                var semail = $("input#emailquiz").val();
                if (validateEmail(semail)) {
                    $(".st-1").css({'border': '2px #49C1E0 solid'});
                    $(".st-1>p").css({'color': '#49C1E0!important'});
                    $(".tick-1>p").css({'color': '#49C1E0!important'});
                    // $(".tick-1").addClass('active-step');
                    $(".get-name-age").css({'display': 'none'});
                    $(".step-2").css({'display': 'block'});
                    $('html, body').animate({scrollTop: 0}, '300');

                } else {
                    $('.message-error-quiz-email').html('Please enter a valid email address (Ex: johndoe@domain.com).');
                    $('.message-error-quiz-email').css({'color': 'red', 'margin-top': '5px'});
                    $('input#emailquiz').css({'border': '1px solid red'});
                }

            }
        });


        $("#btn-nextstep-1").click(function () {
            var psoriasis = $("input[name='answer-psoriasis']:checked").val();
            var eczema = $("input[name='answer-eczema']:checked").val();
            var rosacea = $("input[name='answer-rosacea']:checked").val();
            var dermatitis = $("input[name='answer-dermatitis']:checked").val();
            var severe = $("input[name='answer-severe']:checked").val();

            if (psoriasis && eczema && rosacea && dermatitis && severe) {
                $(".st-3").css({'border': '1px #49C1E0 solid', 'background-color': '#49C1E0', 'color': '#ffffff'});
                $(".st-3>p").css({'display': 'none'});
                $(".st-4").css({'border': '2px #49C1E0 solid'});
                $(".line-3").css({'background-color': '#49C1E0'});
                $(".icon_check_3").css({'display': 'block'});
                $(".st-4>p").css({'color': '#49C1E0'});
                $(".tick-4").css({'color': '#49C1E0'});
                $('html, body').animate({scrollTop: 0}, '300');
            } else {
                alert("You must answer all the questions");
            }
            $('html, body').animate({scrollTop: 0}, '300');
        });
        $("#btn-nextstep-2").click(function () {

            $(".st-1").css({'border': '1px #49C1E0 solid', 'background-color': '#49C1E0', 'color': '#ffffff'});
            $(".st-1>p").css({'display': 'none'});
            $(".line-1").css({'background-color': '#49C1E0'});
            $(".icon_check_1").css({'display': 'block'});
            $(".st-2").css({'border': '2px #49C1E0 solid'});
            $(".st-2>p").css({'color': '#49C1E0'});
            $(".tick-2").css({'color': '#49C1E0'});
            $(".step-2").css({'display': 'none'});
            $(".step-3").css({'display': 'block'});
            $('html, body').animate({scrollTop: 0}, '300');
        });

        $("#btn-nextstep-3").click(function () {
            $(".step-3").css({'display': 'none'});
            $(".step-1").css({'display': 'block'});
            $(".st-2").css({'border': '1px #49C1E0 solid', 'background-color': '#49C1E0', 'color': '#ffffff'});
            $(".st-2>p").css({'display': 'none'});
            $(".st-3").css({'border': '2px #49C1E0 solid'});
            $(".line-2").css({'background-color': '#49C1E0'});
            $(".icon_check_2").css({'display': 'block'});
            $(".st-3>p").css({'color': '#49C1E0'});
            $(".tick-3").css({'color': '#49C1E0'});
            $('html, body').animate({scrollTop: 0}, '300');
        });


        $(".goback-get-name-age").click(function () {
            $(".step-2").css({'display': 'none'});
            $(".get-name-age").css({'display': 'block'});
            $(".line-1").css({'background-color': '#999999'});
            $(".st-1").css({'border': '2px #999999 solid'});
            $(".st-1>p").css({'color': '#999999'});
            $(".tick-1").css({'color': '#999999'});

        });

        $(".goback-step-2").click(function () {
            $(".step-1").css({'display': 'none'});
            $(".step-3").css({'display': 'block'});
            $(".line-2").css({'background-color': '#999999'});
            $(".st-3").css({'border': '2px #c7c7c7 solid', 'color': '#999999'});
            $(".st-3>p").css({'color': '#333333'});
            $(".tick-3").css({'color': '#999999'});
            $(".st-2").css({'background-color': '#ffffff', 'color': '#999999', 'border': '2px #49c1df solid'});
            $(".st-2>p").css({'display': 'block'});
            $(".st-2>span").css({'display': 'none'});
            $(".tick-2").css({'color': '#49C1E0'});
            $("img.icon_check_quiz.icon_check_2").css({'display': 'none'});
        });

        $(".goback-step-1").click(function () {
            $(".step-3").css({'display': 'none'});
            $(".step-2").css({'display': 'block'});
            $(".line-1").css({'background-color': '#999999'});
            $(".line-2").css({'background-color': '#999999'});
            $(".st-2").css({'border': '2px #c7c7c7 solid'});
            $(".st-2>p").css({'color': '#333333'});
            $(".tick-2").css({'color': '#999999'});
            $(".st-1").css({'background-color': '#ffffff', 'color': '#49c0e0', 'border': '2px #49c0e0 solid'});
            $(".st-1>p").css({'display': 'block', 'color': '#49c0e0'});
            $(".st-1>span").css({'display': 'none'});
            $("img.icon_check_quiz.icon_check_1").css({'display': 'none'});
        });


        /* mobile skin quiz step-3*/
        var $btnshowslider1 = $('#btn-show-slider-1');
        var $btnshowslider2 = $('#btn-show-slider-2');
        var $btnshowslider3 = $('#btn-show-slider-3');
        var $btnshowslider4 = $('#btn-show-slider-4');
        var $btnshowslider5 = $('#btn-show-slider-5');
        var $btnshowslider6 = $('#btn-show-slider-6');
        var $urlicon = $('.url-icon-show-hidden').val();
        var $srcicon = '';
        $srcicon += '<img src="';
        $srcicon += $urlicon;
        $srcicon += '">';
        $btnshowslider1.click(function () {
            if ($btnshowslider1.html() === '+') {
                $btnshowslider1.html($srcicon);
                $(".sentence-concern-mobile-1").css({'overflow': 'unset'});
                $('.sentence-concern-mobile-1').attr('style', 'height: auto !important');
            } else {
                $btnshowslider1.html('+');
                $(".sentence-concern-mobile-1").css({'height': '61px', 'overflow': 'hidden'});
            }
        });

        $btnshowslider2.click(function () {
            if ($btnshowslider2.html() === '+') {
                $btnshowslider2.html($srcicon);
                $(".sentence-concern-mobile-2").css({'overflow': 'unset'});
                $('.sentence-concern-mobile-2').attr('style', 'height: auto !important');
            } else {
                $btnshowslider2.html('+');
                $(".sentence-concern-mobile-2").css({'height': '61px', 'overflow': 'hidden'});
            }
        });
        $btnshowslider3.click(function () {
            if ($btnshowslider3.html() === '+') {
                $btnshowslider3.html($srcicon);
                $(".sentence-concern-mobile-3").css({'overflow': 'unset'});
                $('.sentence-concern-mobile-3').attr('style', 'height: auto !important');
            } else {
                $btnshowslider3.html('+');
                $(".sentence-concern-mobile-3").css({'height': '61px', 'overflow': 'hidden'});
            }
        });
        $btnshowslider4.click(function () {
            if ($btnshowslider4.html() === '+') {
                $btnshowslider4.html($srcicon);
                $(".sentence-concern-mobile-4").css({'overflow': 'unset'});
                $('.sentence-concern-mobile-4').attr('style', 'height: auto !important');
            } else {
                $btnshowslider4.html('+');
                $(".sentence-concern-mobile-4").css({'height': '61px', 'overflow': 'hidden'});
            }
        });
        $btnshowslider5.click(function () {
            if ($btnshowslider5.html() === '+') {
                $btnshowslider5.html($srcicon);
                $(".sentence-concern-mobile-5").css({'overflow': 'unset'});
                $('.sentence-concern-mobile-5').attr('style', 'height: auto !important');
            } else {
                $btnshowslider5.html('+');
                $(".sentence-concern-mobile-5").css({'height': '61px', 'overflow': 'hidden'});
            }
        });
        $btnshowslider6.click(function () {
            if ($btnshowslider6.html() === '+') {
                $btnshowslider6.html($srcicon);
                $(".sentence-concern-mobile-6").css({'overflow': 'unset'});
                $('.sentence-concern-mobile-6').attr('style', 'height: auto !important');
            } else {
                $btnshowslider6.html('+');
                $(".sentence-concern-mobile-6").css({'height': '61px', 'overflow': 'hidden'});
            }
        });
        /* END NEXT STEP SKIN QUIZ */
        //mega menu add li tag
        var width = jQuery(window).width();
        if (width < 768) {
            var countLi = jQuery('.section-item-content .menu-container .menu>ul>li .sub-category-mega > div');
            if (countLi.length % 2 == 1) {
                jQuery('.section-item-content .menu-container .menu>ul>li .sub-category-mega').append('<div class="mega-category-with-thumbnail"></div>');
            }
            jQuery('.header--right--wrapper .block.block-search').prependTo('.content-mega .col-left');

        }

        if (width > 768) {
            if(jQuery('.content-mega .col-left').find('.block-search'))
            {
                jQuery('.content-mega .col-left .block.block-search').prependTo('.header--right--wrapper');
            }

        }
        //faq function click

        $('.content-faq .QandA h4').click(function () {
            $(this).next().slideToggle();
            $(this).toggleClass('active');
            $(this).parent().siblings().find('.answer').slideUp();
            $(this).parent().siblings().find('.question').removeClass('active');
        })
        //sidebar cms page
        if ($('body').find('.sidebar-cms').length > 0) {
            var titleUpcase = $('span[data-ui-id="page-title-wrapper"]').text().replace("'", "");
            var title = $('span[data-ui-id="page-title-wrapper"]').text().replace("'", "").toLowerCase().replace(/\s/g, '');
            $('#' + title).addClass('current');
            var titleShowMobile = '<div class="current-page">' + titleUpcase + '</div>';
            $('.sidebar-cms').prepend(titleShowMobile);
            $('.current-page').click(function () {
                $(this).toggleClass('active');
                $(this).closest('.sidebar-cms').find('.content').slideToggle();
            });
        }
        // url title blog
        var Width = jQuery(window).width();
        if (Width <= 767) {
            var str = "/";
            var current_url = jQuery(location).attr("href");
            var connect = current_url.concat(str);
            if (jQuery('.blog-sidebar-block-content').length) {
                jQuery('.blog-sidebar-block-content .block-category-listing .block-category-listing-item ').each(function () {
                    var href = jQuery(this).find('a').attr('href');
                    if (href == connect || href == current_url) {
                        var text = jQuery(this).find('a').text();
                        jQuery('.blog-sidebar-block-content .toggle-menu-responsive').text(text);
                    }
                });
            }
        }

    });
    /* CATEGORY RECENTLY VIEWED SLIDE */
    var load_recently_view = setInterval(function () {
        if (jQuery('.widget.block-viewed-products-grid .product-items').length) {
            jQuery('.widget.block-viewed-products-grid .product-items').addClass('owl-carousel');
            jQuery('.widget.block-viewed-products-grid .product-items.owl-carousel').owlCarousel({
                loop: false,
                dots: true,
                margin: 0,
                nav: true,
                responsiveClass: true,
                responsive: {
                    // 0: {
                    //     items: 1,
                    //     stagePadding: 50,
                    //     autoWidth: true,
                    //     loop: false
                    // },

                    320: {
                        items: 2,
                        loop: false
                    },
                    768: {
                        items: 2,
                        loop: false
                    },
                    1000: {
                        items: 3,
                        loop: false
                    }
                }
            })
            /*ALIGN HEIGHT PRODUCT */
            setTimeout(function () {
                alignHeight('.catalog-product-view .products-grid .product-item .product-item-info .product-item-name');
                alignHeight('.catalog-product-view .products-grid .product-item .product-item-info .price-box');
                alignHeight('.catalog-category-view .block-viewed-products-grid .product-item .product-item-info .product-item-name');
                alignHeight('.catalog-category-view .block-viewed-products-grid .product-item .product-item-info .price-box');
            }, 500);
            jQuery(window).resize(function () {
                setTimeout(function () {
                    alignHeight('.catalog-product-view .products-grid .product-item .product-item-info .product-item-name');
                    alignHeight('.catalog-product-view .products-grid .product-item .product-item-info .price-box');
                    alignHeight('.catalog-category-view .block-viewed-products-grid .product-item .product-item-info .product-item-name');
                    alignHeight('.catalog-category-view .block-viewed-products-grid .product-item .product-item-info .price-box');
                }, 500);
            });
            clearInterval(load_recently_view);
        }
    }, 2000);

    // FUNCTION ALIGN HEIGHT
    function alignHeight(selector) {
        jQuery(selector).css('height', '');
        var minHeight = 0;
        jQuery(selector).each(function () {
            if (minHeight < jQuery(this).outerHeight()) {
                minHeight = jQuery(this).outerHeight();
            }
        });
        if (minHeight > 0) {
            jQuery(selector).css('height', minHeight);
        }
    }

    setInterval(function () {
        alignHeight('.cms-index-index .columns .column.main .block-products-list.grid .products-grid .product-item .product-item-info .product-item-photo');
    }, 2000);
    setTimeout(function () {
        alignHeight('.account.wishlist-index-index .products-grid.wishlist .product-item .product-item-info .product-item-name .product-item-link');
        alignHeight('.account.wishlist-index-index .products-grid.wishlist .product-item .product-item-info .price-box');
        alignHeight('.cms-index-index .columns .column.main .block-products-list.grid .products-grid .product-item .product-item-info .product-item-photo');
    }, 1000);
    jQuery(window).resize(function () {
        setTimeout(function () {
            alignHeight('.account.wishlist-index-index .products-grid.wishlist .product-item .product-item-info .product-item-name .product-item-link');
            alignHeight('.account.wishlist-index-index .products-grid.wishlist .product-item .product-item-info .price-box');
            alignHeight('.cms-index-index .block-products-list .products-grid .product-item .product-item-info .align-summary');
            alignHeight('.cms-index-index .columns .column.main .block-products-list.grid .products-grid .product-item .product-item-info .product-item-photo');
        }, 500);
    });
    /*ADD QTY MY FAVOURITE*/
    jQuery('.minus_wishlist').click(function (event) {
        var qty = parseInt(jQuery(this).closest('.control').find(".qty").val()) - 1;
        if (qty <= 0) {

        } else jQuery(this).closest('.control').find('.qty').val(qty);

    });
    jQuery('.plus_wishlist').click(function (event) {
        var qty = parseInt(jQuery(this).closest('.control').find(".qty").val()) + 1;
        jQuery(this).closest('.control').find('.qty').val(qty);
    });
    var width = jQuery(window).width();
    if (width < 768) {
        /*click sidebar my account mobile*/
        if (jQuery('.sidebar-main .block-collapsible-nav').length) {
            var text = jQuery('.sidebar-main .block-collapsible-nav .block-collapsible-nav-content .nav.item.current strong').text();

            jQuery('.sidebar-main .block-collapsible-nav .block-collapsible-nav-title strong').text(text);
            if (jQuery('.wishlist-index-share').length) {
                jQuery('.sidebar-main .block-collapsible-nav .block-collapsible-nav-title strong').text('My Favourites');
            }
            if (jQuery('.wishlist-index-index').length) {
                jQuery('.sidebar-main .block-collapsible-nav .block-collapsible-nav-title strong').text('My Favourites');
            }
            if (jQuery('.magento_rma-returns-view').length) {
                jQuery('.sidebar-main .block-collapsible-nav .block-collapsible-nav-title strong').text('My Return');
            }
            if (jQuery('.magento_rma-returns-create').length) {
                jQuery('.sidebar-main .block-collapsible-nav .block-collapsible-nav-title strong').text('My Return');
            }
        }
        jQuery('.account .page-title-wrapper').insertBefore(jQuery('.account .sidebar-main'));
        jQuery('.account.referralsystem-referral-index .title-page-refer').insertBefore(jQuery('.account.referralsystem-referral-index .sidebar-main'));
    }
    $(document).ready(function () {
        var currentSelect = ''
        $(document).on('click', '.additional-info-wrapper .subscription-container select', function () {
            currentSelect = $(this).val();
        });
        /* $(document).on('change', '.additional-info-wrapper .subscription-container select', function () {
             if (currentSelect != '') {
                 $('.cart.main.actions .action.update').trigger('click');
             }
         });*/

        // MOVE SEARCH STORE LOCATOR
        // if (width < 768) {
        //     jQuery('.column_right').prepend(jQuery('.search-section'));
        // }
        if (width >= 768) {
            jQuery('.amlocator_mapblock').prepend(jQuery('.search-section'));
        }
        jQuery(window).resize(function () {
            var width = jQuery(window).width();
            // if (width < 768) {
            //     jQuery('.column_right').prepend(jQuery('.search-section'));
            // }
            if (width >= 768) {
                jQuery('.amlocator_mapblock').prepend(jQuery('.search-section'));
            }
        });
    });
    // PLAY VIDEO HOW TO GOLDEN GODDESS
    $(document).ready(function () {
        $('.video_golden .img_background_video').on('click', function () {
            $('.video_golden .img_background_video').hide();
            $(".video_golden iframe")[0].src += "?autoplay=1";
        });
    });

    // TRIGGER MINI CART currency
    jQuery(document).ready(function () {
        jQuery('#switcher-currency-trigger').click(function () {
            if (jQuery('.minicart-wrapper').hasClass('active')) {
                jQuery('body').trigger('click');
                jQuery('#switcher-currency-trigger').trigger('click');
            }
        });
        jQuery('.action.showcart').click(function () {
            if (jQuery('.switcher-options').hasClass('active')) {
                jQuery('body').trigger('click');
                jQuery('.action.showcart').trigger('click');
            }
        });
    });

    //CLOSE MESSAGE
    // jQuery(document).ready(function() {
    //     jQuery('.message').click(function() {
    //         jQuery(this).slideUp();
    //     });
    //     jQuery('.message-success').after().click(function() {
    //         jQuery(this).slideUp();
    //     });
    //     jQuery('.message-error').after().click(function() {
    //         jQuery(this).slideUp();
    //     });
    //     jQuery('.message-warning').after().click(function() {
    //         jQuery(this).slideUp();
    //     });
    // });

    /* TRIGGER CLICK BTN CHECKOUT ON CART PAGE MOBILE */
    $(document).ready(function () {
        $('.mobile-checkout-btn button').on('click', function () {
            if ($('.checkout-cart-index .cart-container .cart-summary .checkout-methods-items .action.primary').length) {
                $('.checkout-cart-index .cart-container .cart-summary .checkout-methods-items .action.primary').trigger('click');
            }
        });
    });
    
    /* PREVENT SCROLL ISSUE ON MOBILE MENU SLIDEOUT */
    (function () {
        
        var _overlay = document.getElementsByClassName('nav-sections')[0];
        if (_overlay) {
          var _clientY = null; // remember Y position on touch start

          _overlay.addEventListener('touchstart', function (event) {
              if (event.targetTouches.length === 1) {
                  // detect single touch
                  _clientY = event.targetTouches[0].clientY;
              }
          }, false);

          _overlay.addEventListener('touchmove', function (event) {
              if (event.targetTouches.length === 1) {
                  // detect single touch
                  disableRubberBand(event);
              }
          }, false);

          function disableRubberBand(event) {
              var clientY = event.targetTouches[0].clientY - _clientY;

              if (_overlay.scrollTop === 0 && clientY > 0) {
                  // element is at the top of its scroll
                  event.preventDefault();
              }

              if (isOverlayTotallyScrolled() && clientY < 0) {
                  //element is at the top of its scroll
                  event.preventDefault();
              }
          }

          function isOverlayTotallyScrolled() {
              // https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions
              return _overlay.scrollHeight - _overlay.scrollTop <= _overlay.clientHeight;
          }
        }
    }());
})